{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "UK Grocery CLI Configuration",
  "description": "User preferences and settings for UK Grocery CLI",
  "type": "object",
  "properties": {
    "provider": {
      "type": "string",
      "enum": ["sainsburys", "ocado"],
      "description": "Preferred supermarket provider"
    },
    "email": {
      "type": "string",
      "format": "email",
      "description": "Supermarket account email"
    },
    "password": {
      "type": "string",
      "description": "Supermarket account password (stored securely)"
    },
    "dietary_restrictions": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": [
          "vegetarian",
          "vegan",
          "halal",
          "kosher",
          "gluten-free",
          "lactose-free",
          "nut-free",
          "shellfish-free"
        ]
      },
      "description": "List of dietary restrictions",
      "uniqueItems": true
    },
    "budget": {
      "type": ["object", "null"],
      "properties": {
        "weekly": {
          "type": "number",
          "minimum": 0,
          "description": "Weekly grocery budget in GBP"
        },
        "monthly": {
          "type": "number",
          "minimum": 0,
          "description": "Monthly grocery budget in GBP"
        }
      },
      "description": "Budget constraints"
    },
    "household_size": {
      "type": "integer",
      "minimum": 1,
      "description": "Number of people in household"
    },
    "organic_priority": {
      "type": "string",
      "enum": ["always", "dirty_dozen_only", "never", "budget_based"],
      "default": "dirty_dozen_only",
      "description": "When to prioritize organic products"
    },
    "external_sources": {
      "type": "object",
      "properties": {
        "meat": {
          "type": "string",
          "description": "External source for meat (e.g., halal butcher name)"
        },
        "fish": {
          "type": "string",
          "description": "External source for fish"
        },
        "bakery": {
          "type": "string",
          "description": "External bakery source"
        }
      },
      "description": "External sourcing for specific product categories"
    },
    "preferred_brands": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "List of preferred brands",
      "uniqueItems": true
    },
    "excluded_brands": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "List of brands to avoid",
      "uniqueItems": true
    },
    "delivery_preferences": {
      "type": "object",
      "properties": {
        "preferred_days": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"]
          }
        },
        "preferred_times": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["morning", "afternoon", "evening"]
          }
        },
        "max_delivery_cost": {
          "type": "number",
          "minimum": 0,
          "description": "Maximum acceptable delivery charge in GBP"
        }
      },
      "description": "Delivery slot preferences"
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "description": "Configuration creation timestamp"
    },
    "updated_at": {
      "type": "string",
      "format": "date-time",
      "description": "Last configuration update timestamp"
    }
  },
  "required": ["provider", "email", "household_size"],
  "additionalProperties": false
}
